<!doctype html>
<html lang="sv">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Smart Postcard â€” SV v8.0</title>
<meta http-equiv="Cache-Control" content="no-store" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<style>
  :root{
    --bw-c1:#10b981; --bw-c2:#22d3ee; --bw-c3:#34d399;
    --brandword-size:26px;
    --title-size:23px;
    --gapTop:31.5px;
    --title-lh:1.06;
    --gap2:28px;
    --gap3:32px;
    --sideGapL:24px;
    --sideGapR:25px;

    --explain-bg:#FFF8D9;

    --card-border:1px;
    --card-border-color:#d1d5db;
    --arrow-fat:22px;
    --arrow-width:26px;
    --ex-pad-y:10px;
    --ex-pad-x:18px;
    --marker-fat:16px;
    --marker-base:13px;
    --marker-color:#16a34a;

    --active-blue:#1e56d6;
  }

  *{box-sizing:border-box}
  html,body{
    margin:0;background:#fff;color:#222;
    font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  }
  img{max-width:100%;display:block}

  /* âœ… å…³é”®ï¼šæ•´å±é”å®š APPï¼ˆæ¨ªå¹…+æ¨ªå¹…ä»¥ä¸‹å…¨éƒ¨ï¼‰ï¼Œä½† body ä»ç„¶å¯æ»šåŠ¨ä»¥è®©æµè§ˆå™¨æœç´¢æ æ¶ˆå¤± */
  #app-fixed{
    position:fixed;
    inset:0;
    background:#fff;
    overflow:hidden;
    z-index:1;
    touch-action: pan-y; /* å…è®¸ä¸Šæ»‘è§¦å‘æµè§ˆå™¨æ»šåŠ¨ */
  }
  #scroll-spacer{
    height:240vh; /* ç»™æµè§ˆå™¨è¶³å¤Ÿæ»šåŠ¨è·ç¦»ï¼Œè®©æœç´¢æ æ¶ˆå¤± */
  }

  .top{position:sticky;top:0;z-index:10;background:#F5B800;box-shadow:0 2px 12px rgba(0,0,0,.08)}
  .bar{max-width:980px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:10px;padding:10px 14px}
  .brand{display:flex;align-items:center;gap:10px}
  .brand img{width:64px;height:64px;object-fit:contain}
  .brandword{display:flex;flex-direction:column;line-height:1}
  .brandword .l1,.brandword .l2{
    font-weight:900;font-size:var(--brandword-size);letter-spacing:.5px;
    background:linear-gradient(90deg,var(--bw-c1),var(--bw-c2) 55%,var(--bw-c3));
    -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
  }
  .actions{display:flex;align-items:center;gap:8px}
  .iconbtn{width:40px;height:40px;display:grid;place-items:center;border-radius:50%;background:#fff;box-shadow:inset 0 0 0 1px rgba(0,0,0,.08)}
  .cart{position:relative}
  .badge{position:absolute;right:-6px;top:-6px;background:#ff4d4f;color:#fff;border-radius:8px;padding:0 5px;font-size:10px;line-height:16px;min-width:16px;height:16px;font-weight:800}

  /* language pill: keep size/shape; no frame-in-frame; just blue EN */
  .langpill{display:flex;align-items:center;gap:8px;padding:8px 10px;border-radius:999px;background:#fff;box-shadow:inset 0 0 0 1px rgba(0,0,0,.08); cursor:pointer}
  .langtext{
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:900;
    font-size:14px;
    letter-spacing:.6px;
    line-height:1;
    color:var(--active-blue);
  }
  .caret{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:6px solid #222}
  .menu{font-size:22px;font-weight:900}

  main{max-width:980px;margin:0 auto;min-height:100svh;display:flex;flex-direction:column;padding:0 14px 12px}

  /* âœ… ç¬¬ä¸€ç•™ç™½ä»åœ¨ï¼Œä½†å› ä¸ºæ•´å±é”å®šï¼Œä¸ä¼šè¢«ä¸Šæ»‘åƒæ‰ */
  .gapTop{height:var(--gapTop);}
  .gap2{height:var(--gap2);}
  h1.page-title{font-size:var(--title-size);line-height:var(--title-lh);font-weight:800;text-align:center;margin:0;letter-spacing:0.08em}
  .stage{
    display:flex;flex-direction:column;
    background:#fff;border-radius:20px;
    padding-left:var(--sideGapL);padding-right:var(--sideGapR);
  }
  .explain{
    position:relative;
    display:inline-block;
    align-self:center;
    padding:var(--ex-pad-y) var(--ex-pad-x);
    border-radius:14px;
    background:var(--explain-bg);
    font-size:14px;
    line-height:1.16;
    text-align:center;
  }
  .explain-keeper{visibility:hidden;white-space:normal;}
  #explain-text{
    position:absolute;
    left:var(--ex-pad-x);
    right:var(--ex-pad-x);
    top:var(--ex-pad-y);
    bottom:var(--ex-pad-y);
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    font-size:14px;
    line-height:1.16;
  }
  .viewer{position:relative;margin-top:var(--gap3);}
  .cardbox{
    position:relative;width:100%;margin:0;
    border-radius:0;overflow:visible;background:#fff;
    border:var(--card-border) solid var(--card-border-color);
    box-shadow:0 2px 6px rgba(0,0,0,.06);
  }
  .cardbox-inner{position:relative;width:100%;padding-top:70%;overflow:visible;background:#fff;}
  .cardbox-inner::before{content:none;}
  .hotspot{position:absolute;border:none;background:transparent;padding:0;margin:0;cursor:pointer;z-index:3;}
  .hotspot:focus{outline:none;}
  .hotspot-center{top:25.09%;left:46.00%;width:14.35%;height:51.20%;}
  .hotspot-stamp{top:-12.00%;left:79.05%;width:20.00%;height:30.00%;}
  .hotspot-qr1{top:-11.81%;left:48.07%;width:20.00%;height:30.55%;}
  .hotspot-weather{top:-4.63%;left:8.13%;width:42.00%;height:23.37%;}
  .hotspot-writing{top:27.00%;left:0.00%;width:44.50%;height:36.00%;}
  .hotspot-qr2{top:73.30%;left:2.00%;width:20.00%;height:33.43%;}
  .hotspot-seal{top:70.74%;left:19.00%;width:22.00%;height:35.43%;}
  .hotspot-address{top:40.00%;left:64.94%;width:28.00%;height:36.00%;}
  .hotspot-postmark{top:18.62%;left:64.51%;width:14.00%;height:16.00%;}
  .big-arrow{position:absolute;width:0;height:0;border:0;background:transparent;padding:0;pointer-events:auto;z-index:2;}
  .big-arrow.left{left:0;}
  .big-arrow.left::before{
    content:"";display:block;width:0;height:0;
    border-top:var(--arrow-fat) solid transparent;
    border-bottom:var(--arrow-fat) solid transparent;
    border-right:var(--arrow-width) solid #0b3a77;
    margin-left:calc(-1 * var(--arrow-width));
  }
  .big-arrow.right{right:0;}
  .big-arrow.right::before{
    content:"";display:block;width:0;height:0;
    border-top:var(--arrow-fat) solid transparent;
    border-bottom:var(--arrow-fat) solid transparent;
    border-left:var(--arrow-width) solid #0b3a77;
  }

  .features{
    margin-top:calc(var(--gap3) - 4px);
    text-align:center;
    font-size:14px;
    line-height:1.16;
    font-weight:700;
    color:#000000;
  }
  .features-line{display:block;}
  .features-line + .features-line{margin-top:0;}

  .cta{margin-top:calc(var(--gap3) - 4px);margin-bottom:12px;}
  /* âœ… â‘  ä¸Šé¢ä¸¤é”®ï¼šç­‰é•¿ï¼ˆå¼ºåˆ¶ç­‰å®½ï¼‰+ ä¸‰ç•™ç™½æ›´å‡è¡¡ï¼ˆé™åˆ¶æ€»å®½ï¼Œå±…ä¸­ï¼‰+ å¡”å½¢ */
  .cta-row-top{display:flex;justify-content:center;column-gap:14px;width:100%;max-width:420px;margin:0 auto;}
  .btn-gold,.btn-main{
    display:flex;align-items:center;justify-content:center;
    border-radius:22px;border:1px solid rgba(140,103,36,.45);
    background:linear-gradient(180deg,#ffe49b 0%, #e8be58 52%, #bf8f31 100%);
    box-shadow:inset 0 2px 0 rgba(255,255,255,.85), inset 0 -2px 0 rgba(0,0,0,.18), 0 8px 18px rgba(0,0,0,.14);
    color:#2f2f2f;
    text-shadow:0 1px 0 rgba(255,255,255,.75),0 -1px 0 rgba(0,0,0,.18);
    font-family:inherit;font-weight:900;white-space:nowrap;
  }
  .btn-gold{flex:1 1 0;min-width:0;height:38px;font-size:13px;padding:0 12px;}
  .btn-main{display:block;width:100%;margin:12px 0 0;height:40px;font-size:16px;border-radius:24px;}
  .btn-primary{color:#1e56d6;}

  .marker{
    position:absolute;width:0;height:0;
    border-left:var(--marker-base) solid transparent;
    border-right:var(--marker-base) solid transparent;
    border-top:var(--marker-fat) solid var(--marker-color);
    filter:drop-shadow(0 2px 4px rgba(22,163,74,.35));
    pointer-events:none;z-index:9;
  }

  .auto-play{
    position:absolute;right:10px;bottom:10px;width:26px;height:26px;border-radius:999px;border:none;
    background:#ffffff;box-shadow:0 2px 6px rgba(0,0,0,.3);
    display:flex;align-items:center;justify-content:center;cursor:pointer;padding:0;
  }
  .auto-play::before{content:"â–¶";font-size:13px;transform:translateX(1px);}
  .auto-play.playing::before{content:"â…¡";transform:translateX(0);font-size:12px;}

  /* dropdown */
  .lang-menu{
    position:fixed;z-index:9999;right:8px;top:64px;
    width:fit-content;max-width:calc(100vw - 16px);max-height:52vh;overflow:auto;
    padding:8px;border-radius:16px;background:#fff;border:1px solid rgba(0,0,0,.10);
    box-shadow:0 18px 50px rgba(0,0,0,.22);display:none;-webkit-overflow-scrolling:touch;
  }
  .lang-menu.open{display:block;}
  .lang-item{
    display:flex;align-items:center;gap:10px;padding:8px 8px;border-radius:14px;
    text-decoration:none;color:#111;user-select:none;-webkit-tap-highlight-color: transparent;
    width:100%;background:transparent;
  }
  .lang-item:hover{background:transparent;}
  .lang-item:active{transform:scale(.99);}
  .lang-badge{
    width:44px;height:28px;border-radius:999px;display:flex;align-items:center;justify-content:center;
    font-weight:900;letter-spacing:.6px;background:rgba(0,0,0,.05);
    box-shadow:inset 0 0 0 1px rgba(0,0,0,.10);flex:0 0 auto;color:#111;
  }
  .lang-name{
    font-weight:900;font-size:13px;line-height:1.1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
    padding-right:2px;color:#111;
  }
  .lang-item.current .lang-badge{ color:var(--active-blue); }
  .lang-item.current .lang-name{ color:var(--active-blue); }
</style>
</head>
<body>

<div id="app-fixed">
  <header class="top">
    <div class="bar">
      <div class="brand">
        <img alt="Smart Postcard" src="Logo.png"/>
        <div class="brandword">
          <span class="l1">Smart</span>
          <span class="l2">Postcard</span>
        </div>
      </div>
      <div class="actions">
        <div class="iconbtn cart"><span style="font-size:18px">ğŸ›’</span><span class="badge" id="cart-badge">0</span></div>

        <div class="langpill" id="lang-pill" aria-label="Language">
          <span class="langtext" id="lang-ct">SV</span>
          <span class="caret"></span>
        </div>

        <div aria-label="menu" class="iconbtn"><span class="menu">â‰¡</span></div>
      </div>
    </div>
  </header>

  <div class="lang-menu" id="lang-menu" role="menu" aria-label="Language menu"></div>

  <main>
    <div class="gapTop"></div>

    <h1 class="page-title">VÃ„RDESÃ„TT DITT UNIKA<br/>SOUVENIRVYKORT</h1>
    <div class="gap2"></div>

    <section class="stage">
      <div class="explain">
        <div class="explain-keeper">
          VÃ¤nligen fyll i postadressen!<br/>
          Landnamn mÃ¥ste vara pÃ¥ engelska!<br/>
          Se exempel i adressfÃ¤ltet!<br/>
        </div>
        <div id="explain-text">
          TillÃ¥t att anvÃ¤nda ditt eget foto!<br/>
          VÃ¤rdesÃ¤tt det historiska tillfÃ¤llet!<br/>
          Det Ã¤r unikt i vÃ¤rlden!
        </div>
      </div>

      <div class="viewer">
        <button aria-label="Previous stop" class="big-arrow left" id="prev"></button>
        <button aria-label="Next stop" class="big-arrow right" id="next"></button>

        <div class="cardbox" id="cardbox">
          <div class="cardbox-inner" id="cardbox-inner">
            <img id="pc-img" src="postcard_en.png" alt="Smart Postcard sample"
                 style="position:absolute;inset:0;width:100%;height:100%;object-fit:cover;display:block;border-radius:0;">
            <div class="marker" id="marker"></div>
            <button class="auto-play" id="auto-play" aria-label="Auto demo"></button>

            <button class="hotspot hotspot-center" id="hotspot-center" aria-label="Center hotspot (image / album)"></button>
            <button class="hotspot hotspot-stamp" id="hotspot-stamp" aria-label="Stamp hotspot"></button>
            <button class="hotspot hotspot-qr1" id="hotspot-qr1" aria-label="Map hotspot"></button>
            <button class="hotspot hotspot-weather" id="hotspot-weather" aria-label="Weather hotspot"></button>
            <button class="hotspot hotspot-writing" id="hotspot-writing" aria-label="Writing hotspot"></button>
            <button class="hotspot hotspot-qr2" id="hotspot-qr2" aria-label="Media hotspot"></button>
            <button class="hotspot hotspot-seal" id="hotspot-seal" aria-label="Seal hotspot"></button>
            <button class="hotspot hotspot-address" id="hotspot-address" aria-label="Address hotspot"></button>
            <button class="hotspot hotspot-postmark" id="hotspot-postmark" aria-label="Postmark hotspot"></button>
          </div>
        </div>
      </div>

      <section class="features" aria-label="Smart Postcard features">
        <div class="features-line">Att skapa Â· Fysisk utskrift</div>
        <div class="features-line">VÃ¤rdefullt album Â· Leverans globalt</div>
        <div class="features-line">Resesouvenir Â· Filatelistiskt samlarobjekt</div>
        <div class="features-line">Fototryck Â· Stor A5-storlek Â· Mycket prisvÃ¤rt</div>
      </section>
    </section>

    <section class="cta" aria-label="Choose postcard type">
      <div class="cta-row-top">
        <!-- âœ… â‘  æ–‡æ¡ˆä¿®æ­£ï¼šMinnesvykort â†’ Souvenirvykortï¼ˆå…¶å®ƒä¸åŠ¨ï¼‰ -->
        <button class="btn-gold btn-primary" type="button">Souvenirvykort</button>
        <button class="btn-gold" type="button">Traditionellt vykort</button>
      </div>
      <button class="btn-main" type="button">VÃ¤rdesÃ¤tt nu</button>
    </section>
  </main>

  <script>
  (function(){
    function positionArrows(){
      var ex = document.querySelector('.explain');
      var viewer = document.querySelector('.viewer');
      var prev = document.getElementById('prev');
      var next = document.getElementById('next');
      if(!ex || !viewer || !prev || !next) return;
      var er = ex.getBoundingClientRect();
      var vr = viewer.getBoundingClientRect();
      var centerY = er.top + er.height/2;
      var y = centerY - vr.top - 22;
      prev.style.top = y + 'px';
      next.style.top = y + 'px';
    }
    window.addEventListener('DOMContentLoaded', positionArrows);
    window.addEventListener('load', positionArrows);
    window.addEventListener('resize', positionArrows);
    window.addEventListener('orientationchange', positionArrows);
  })();
  </script>

  <script>
  (function(){
    var messages = {
      1: "&nbsp;&nbsp;Bilden pÃ¥ vykortet / frimÃ¤rket!<br/>Byt till ditt favoritfoto!<br/>Ett stort A5-foto framkallas!",
      2: "TillÃ¥t att anvÃ¤nda ditt eget foto!<br/>VÃ¤rdesÃ¤tt det historiska tillfÃ¤llet!<br/>Det Ã¤r unikt i vÃ¤rlden!",
      3: "Ditt besÃ¶ksminne som kan<br/>&nbsp;&nbsp;markeras pÃ¥ kartan! Skanna<br/>QR-koden fÃ¶r att Ã¥teruppleva/dela!",
      4: "Skriv kÃ¤nsla, datum, vÃ¤der,<br/>temperatur! Det Ã¤r efterskriften<br/>&nbsp;vid ditt minnesmÃ¤rke pÃ¥ kartan!",
      5: "&nbsp;&nbsp;&nbsp;&nbsp;Skriv dina hjÃ¤rtliga ord!<br/>Bevara ett vackert minne!",
      6: "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BehÃ¥ll en video/ljud som minne!<br/>Skanna QR-koden fÃ¶r upspelning!<br/>Tryck och hÃ¥ll pÃ¥ koden i mobilen!",
      7: "LÃ¤gg till ett lokalt minnessigill!<br/>Det Ã¤r ett vittne till ditt besÃ¶k!<br/>LÃ¥ngtryck stÃ¤mpeln = Ai-guide!",
      8: "VÃ¤nligen fyll i postadressen!<br/>Landnamn mÃ¥ste vara pÃ¥ engelska!<br/>Se exempel i adressfÃ¤ltet!",
      9: "Minnesdatum & poststÃ¤mpelns<br/>datum stÃ¤mmer Ã¶verens!",
      10: "Digitalt vykortsalbum â€” gratis!<br/>BÃ¶rja med fem! Skickas via e-post!<br/>Fler senare kan samlas i ett!"
    };
    var leftOrder  = [2,3,4,5,6,7,8,9,10,1];
    var rightOrder = [2,1,10,9,8,7,6,5,4,3];
    var autoOrder  = [1,2,3,4,5,6,7,8,9,10];

    function nextIn(order, current, fallback){
      var i = order.indexOf(current);
      if(i === -1) return (fallback || order[0]);
      return order[(i+1) % order.length];
    }

    var box  = document.getElementById('explain-text');
    var left = document.getElementById('prev');
    var right= document.getElementById('next');
    if(!box || !left || !right) return;

    window.SP_state = window.SP_state || { current: 2 };
    var state = window.SP_state;

    function renderExplain(){
      box.innerHTML = messages[state.current] || "";
      var img = document.getElementById('pc-img');
      if(img){
        var n = state.current;
        var src = 'postcard_en.png';
        if(n === 1){
          src = 'oslo_ski_jump_background.jpg';
        }else if(n === 10){
          src = 'Memorial_Postcard_Album_cover_A5_landscape_plain.png';
        }
        if(img.getAttribute('src') !== src){
          img.setAttribute('src', src);
        }
      }
    }

    function syncMarker(){
      if(window.SP10_render) window.SP10_render();
    }

    function goLeft(){
      state.current = nextIn(leftOrder, state.current, 2);
      renderExplain(); syncMarker();
    }
    function goRight(){
      state.current = nextIn(rightOrder, state.current, 2);
      renderExplain(); syncMarker();
    }

    var AUTO_SHORT = 10000;
    var AUTO_LONG  = 10000;
    var autoTimer  = null;
    window.SP_autoRunning = window.SP_autoRunning || false;
    window.SP_autoPaused  = window.SP_autoPaused  || false;
    var autoBtn = document.getElementById('auto-play');
    var autoJustStarted = false;
    var lastAutoClick = 0;

    function clearAuto(){
      if(autoTimer){ clearTimeout(autoTimer); autoTimer = null; }
    }
    function scheduleNext(){
      clearAuto();
      if(!window.SP_autoRunning) return;
      var delay = (state.current === 2 ? AUTO_LONG : AUTO_SHORT);
      autoTimer = setTimeout(stepAuto, delay);
    }
    function stepAuto(){
      if(!window.SP_autoRunning) return;
      if(autoJustStarted){
        autoJustStarted = false;
        state.current = 1;
      }else{
        var idx = autoOrder.indexOf(state.current);
        if(idx === -1) idx = 0;
        state.current = autoOrder[(idx + 1) % autoOrder.length];
      }
      renderExplain(); syncMarker(); scheduleNext();
    }
    function startAuto(){
      if(window.SP_autoRunning) return;
      window.SP_autoRunning = true;
      window.SP_autoPaused = false;
      if(autoBtn) autoBtn.classList.add('playing');
      state.current = 2;
      renderExplain(); syncMarker();
      autoJustStarted = true;
      scheduleNext();
    }
    function stopAuto(){
      if(!window.SP_autoRunning && !window.SP_autoPaused) return;
      window.SP_autoRunning = false;
      window.SP_autoPaused = false;
      if(autoBtn) autoBtn.classList.remove('playing');
      clearAuto();
    }

    left.addEventListener('click', function(){ stopAuto(); goLeft(); });
    right.addEventListener('click', function(){ stopAuto(); goRight(); });

    function goTo(n){
      if(typeof n !== 'number') return;
      state.current = n;
      renderExplain(); syncMarker();
    }
    function bindHotspot(id, target){
      var el = document.getElementById(id);
      if(!el) return;
      el.addEventListener('click', function(){ stopAuto(); goTo(target); });
    }
    function bindCenterHotspot(id){
      var el = document.getElementById(id);
      if(!el) return;
      var lastTap = 0;
      el.addEventListener('click', function(){
        var now = Date.now();
        var delta = now - lastTap;
        lastTap = now;
        stopAuto();
        if(delta > 0 && delta < 400){ goTo(10); }
        else{ goTo(1); }
      });
    }

    bindCenterHotspot('hotspot-center');
    bindHotspot('hotspot-stamp', 2);
    bindHotspot('hotspot-qr1', 3);
    bindHotspot('hotspot-weather', 4);
    bindHotspot('hotspot-writing', 5);
    bindHotspot('hotspot-qr2', 6);
    bindHotspot('hotspot-seal', 7);
    bindHotspot('hotspot-address', 8);
    bindHotspot('hotspot-postmark', 9);

    if(autoBtn){
      autoBtn.addEventListener('click', function(){
        var now = Date.now();
        var delta = now - lastAutoClick;
        lastAutoClick = now;

        if(delta > 0 && delta < 400){
          stopAuto(); startAuto(); return;
        }
        if(window.SP_autoRunning){
          window.SP_autoRunning = false;
          window.SP_autoPaused = true;
          autoBtn.classList.remove('playing');
          clearAuto();
        }else if(window.SP_autoPaused){
          window.SP_autoRunning = true;
          window.SP_autoPaused = false;
          autoBtn.classList.add('playing');
          autoJustStarted = false;
          scheduleNext();
        }else{
          startAuto();
        }
      });
    }

    window.SP_goLeft = goLeft;
    window.SP_goRight = goRight;
    window.SP_renderExplain = renderExplain;
    window.SP_startAuto = startAuto;
    window.SP_stopAuto = stopAuto;

    renderExplain();
  })();
  </script>

  <script>
  (function(){
    var anchors = [
      {n:1, nx:0.491168, ny:0.000456, rot:180},
      {n:2, nx:0.880461, ny:0.000000, rot:180},
      {n:3, nx:0.570673, ny:0.001898, rot:180},
      {n:4, nx:0.281333, ny:0.003738, rot:180},
      {n:5, nx:0.000000, ny:0.435712, rot:90},
      {n:6, nx:0.119237, ny:1.000000, rot:0},
      {n:7, nx:0.290871, ny:0.998160, rot:0},
      {n:8, nx:1.000000, ny:0.584399, rot:270},
      {n:9, nx:0.999215, ny:0.243292, rot:270},
      {n:10, nx:0.491168, ny:0.000456, rot:180}
    ];
    function renderMarker(){
      var marker = document.getElementById('marker');
      if(!marker) return;
      var s = window.SP_state || { current: 2 };
      var cur = typeof s.current === 'number' ? s.current : 2;
      var a = anchors.find(function(x){ return x.n === cur; }) || anchors[1];
      marker.style.left = (a.nx * 100) + '%';
      marker.style.top  = (a.ny * 100) + '%';
      var deg = (a.rot + 180) % 360;

      var offset = 9.5;
      var dx = 0, dy = 0;
      if(deg === 0){ dy = -offset; }
      else if(deg === 180){ dy = offset; }
      else if(deg === 90){ dx = offset; }
      else if(deg === 270){ dx = -offset; }

      marker.style.transform =
        'translate(calc(-50% + ' + dx + 'px), calc(-50% + ' + dy + 'px)) rotate(' + deg + 'deg) scale(0.9)';
    }
    window.addEventListener('load', renderMarker);
    window.addEventListener('resize', renderMarker);
    window.SP10_render = renderMarker;
  })();
  </script>

  <!-- âœ… â‘¡â‘¢â‘£ è¯­è¨€æ ï¼šSV å½“å‰è¯­è¨€ï¼›æ¯æ¬¡æ‰“å¼€å›é»˜è®¤ï¼›å½“å‰è¯­è¨€ç¬¬ä¸€+è®°å¿†ç¬¬äºŒ+é»˜è®¤é¡ºåºè¡¥é½ï¼›CN/TC ç»‘å®š -->
  <script>
  (function(){
    var pill = document.getElementById('lang-pill');
    var menu = document.getElementById('lang-menu');
    var ct   = document.getElementById('lang-ct');
    if(!pill || !menu || !ct) return;

    var STORAGE_CUR  = 'sp_lang_current_v8';
    var STORAGE_PREV = 'sp_lang_prev_v8';

    function detectBase(){
      try{
        var host = window.location.hostname || "";
        var path = window.location.pathname || "/";
        var parts = path.split('/').filter(Boolean);
        if(host.endsWith('github.io') && parts.length >= 1){
          return '/' + parts[0] + '/';
        }
        return '';
      }catch(e){ return ''; }
    }
    var base = detectBase();

    // âœ… 26-language set (ID uses B. Indonesia)
    var META = {
      'EN':  {name:'English',      href: base + 'en_v8.0.html'},
      'ç®€':  {name:'ç®€ä½“ä¸­æ–‡',       href: base + 'cn_v8.0.html'},
      'ç¹':  {name:'ç¹é«”ä¸­æ–‡',       href: base + 'tc_v8.0.html'},
      'ES':  {name:'EspaÃ±ol',      href: base + 'es_v8.0.html'},
      'FR':  {name:'FranÃ§ais',     href: base + 'fr_v8.0.html'},
      'RU':  {name:'Ğ ÑƒÑÑĞºĞ¸Ğ¹',      href: base + 'ru_v8.0.html'},
      'DE':  {name:'Deutsch',      href: base + 'de_v8.0.html'},
      'PT':  {name:'PortuguÃªs',    href: base + 'pt_v8.0.html'},
      'IT':  {name:'Italiano',     href: base + 'it_v8.0.html'},
      'TR':  {name:'TÃ¼rkÃ§e',       href: base + 'tr_v8.0.html'},
      'PL':  {name:'Polski',       href: base + 'pl_v8.0.html'},
      'NL':  {name:'Nederlands',   href: base + 'nl_v8.0.html'},
      'SV':  {name:'Svenska',      href: base + 'sv_v8.0.html'},
      'FI':  {name:'Suomi',        href: base + 'fi_v8.0.html'},
      'DA':  {name:'Dansk',        href: base + 'da_v8.0.html'},
      'NO':  {name:'Norsk',        href: base + 'no_v8.0.html'},
      'IS':  {name:'Ãslenska',     href: base + 'is_v8.0.html'},
      'AR':  {name:'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',      href: base + 'ar_v8.0.html'},
      'HI':  {name:'à¤¹à¤¿à¤¨à¥à¤¦à¥€',       href: base + 'hi_v8.0.html'},
      'JA':  {name:'æ—¥æœ¬èª',         href: base + 'ja_v8.0.html'},
      'KO':  {name:'í•œêµ­ì–´',         href: base + 'ko_v8.0.html'},
      'TH':  {name:'à¹„à¸—à¸¢',          href: base + 'th_v8.0.html'},
      'VI':  {name:'Tiáº¿ng Viá»‡t',   href: base + 'vi_v8.0.html'},
      'ID':  {name:'B. Indonesia', href: base + 'id_v8.0.html'},
      'FIL': {name:'Filipino',     href: base + 'fil_v8.0.html'}
    };

    // é»˜è®¤é¡ºåºï¼šENã€ç®€ã€ç¹â€¦ï¼ˆå…¶ä½™æŒ‰æ—¢å®šï¼‰
    var DEFAULT_ORDER = ['EN','ç®€','ç¹','ES','FR','RU','DE','PT','IT','TR','PL','NL','SV','FI','DA','NO','IS','AR','HI','JA','KO','TH','VI','ID','FIL'];

    function getHtmlLang(){
      return (document.documentElement.getAttribute('lang') || '').toLowerCase();
    }

    // âœ… å½“å‰è¯­è¨€ä¼˜å…ˆä» <html lang=""> åˆ¤æ–­ï¼Œé¿å…æœ¬åœ°æ‰“å¼€/è½¯ä»¶æ‰“å¼€å¯¼è‡´ pathname è¯†åˆ«å¤±è´¥
    function inferCurrentFromHtml(){
      var l = getHtmlLang();
      if(l === 'sv') return 'SV';
      if(l === 'en') return 'EN';
      if(l === 'zh-cn' || l === 'zh-hans' || l === 'zh') return 'ç®€';
      if(l === 'zh-tw' || l === 'zh-hant' || l === 'zh-hk') return 'ç¹';
      if(l === 'fr') return 'FR';
      if(l === 'es') return 'ES';
      if(l === 'de') return 'DE';
      if(l === 'ru') return 'RU';
      if(l === 'pt') return 'PT';
      if(l === 'it') return 'IT';
      if(l === 'tr') return 'TR';
      if(l === 'pl') return 'PL';
      if(l === 'nl') return 'NL';
      if(l === 'fi') return 'FI';
      if(l === 'da') return 'DA';
      if(l === 'no' || l === 'nb' || l === 'nn') return 'NO';
      if(l === 'is') return 'IS';
      if(l === 'ar') return 'AR';
      if(l === 'hi') return 'HI';
      if(l === 'ja') return 'JA';
      if(l === 'ko') return 'KO';
      if(l === 'th') return 'TH';
      if(l === 'vi') return 'VI';
      if(l === 'id') return 'ID';
      if(l === 'fil') return 'FIL';
      return 'SV';
    }

    function safeGet(key){
      try{ return localStorage.getItem(key) || ''; }catch(e){ return ''; }
    }
    function safeSet(key,val){
      try{ localStorage.setItem(key, val); }catch(e){}
    }

    function normalizeCode(code){
      return META[code] ? code : 'SV';
    }

    function groupFor(code){
      if(code === 'ç®€') return ['ç®€','ç¹'];
      if(code === 'ç¹') return ['ç¹','ç®€'];
      return [code];
    }

    function buildOrder(cur, prev){
      cur = normalizeCode(cur);
      prev = prev ? normalizeCode(prev) : '';
      var out = [];
      var seen = new Set();

      function addCode(c){
        if(!META[c] || seen.has(c)) return;
        out.push(c); seen.add(c);
      }
      function addGroup(code){
        groupFor(code).forEach(addCode);
      }

      // â‘  å½“å‰è¯­è¨€ç¬¬ä¸€
      addGroup(cur);

      // â‘¡ è®°å¿†è¯­è¨€ç¬¬äºŒï¼ˆè‹¥ä¸åŒï¼‰
      if(prev && !seen.has(prev)){
        addGroup(prev);
      }

      // â‘¢ å…¶ä½™æŒ‰é»˜è®¤é¡ºåºè¡¥é½ï¼ˆä¸­æ–‡è§†ä¸ºä¸€ç»„ï¼Œç®€ç¹å½¢å½±ç›¸éšï¼‰
      for(var i=0;i<DEFAULT_ORDER.length;i++){
        var c = DEFAULT_ORDER[i];
        if(c === 'ç®€' || c === 'ç¹'){
          if(!seen.has('ç®€') && !seen.has('ç¹')){
            addCode('ç®€'); addCode('ç¹');
          }
          continue;
        }
        addCode(c);
      }
      return out;
    }

    function currentCode(){
      // ä»¥ html lang ä¸ºå‡†ï¼Œå¹¶åŒæ­¥å­˜å‚¨ï¼Œä¾¿äºè·¨ç‰ˆæœ¬è®°å¿†æ’åº
      var cur = inferCurrentFromHtml();
      var storedCur = safeGet(STORAGE_CUR);
      // è‹¥å­˜å‚¨çš„ current ä¸ html ä¸ä¸€è‡´ï¼Œè¯´æ˜ç”¨æˆ·å·²è·³è½¬åˆ°æœ¬é¡µï¼šä»¥æœ¬é¡µä¸ºå‡†
      if(storedCur !== cur) safeSet(STORAGE_CUR, cur);
      return cur;
    }

    function syncPill(){ ct.textContent = currentCode(); }

    function renderMenu(){
      var cur = currentCode();
      var prev = safeGet(STORAGE_PREV);
      var order = buildOrder(cur, prev);

      menu.innerHTML = order.map(function(code){
        var x = META[code];
        if(!x) return '';
        var cls = 'lang-item' + (code === cur ? ' current' : '');
        return (
          '<a class="'+cls+'" href="'+x.href+'" role="menuitem" data-code="'+code+'" aria-label="'+x.name+'">' +
            '<span class="lang-badge">'+code+'</span>' +
            '<span class="lang-name">'+x.name+'</span>' +
          '</a>'
        );
      }).join('');

      // ç‚¹å‡»ï¼šå†™å…¥è®°å¿†ï¼ˆprev/currentï¼‰ï¼Œå†è·³è½¬
      var links = menu.querySelectorAll('a.lang-item');
      links.forEach(function(a){
        a.addEventListener('click', function(ev){
          ev.preventDefault();
          var to = a.getAttribute('data-code') || '';
          to = normalizeCode(to);
          var curNow = currentCode();

          if(to !== curNow){
            safeSet(STORAGE_PREV, curNow);
            safeSet(STORAGE_CUR, to);
          }
          window.location.href = a.getAttribute('href');
        }, {passive:false});
      });
    }

    function positionMenu(){
      var r = pill.getBoundingClientRect();
      var pad = 8;
      var top = r.bottom + 8;
      menu.style.top = top + 'px';
      requestAnimationFrame(function(){
        var h = menu.offsetHeight || 0;
        var maxTop = window.innerHeight - pad - h;
        if(top > maxTop) menu.style.top = Math.max(pad, maxTop) + 'px';
      });
    }

    function openMenu(){
      syncPill();
      renderMenu();
      menu.classList.add('open');
      positionMenu();
      // âœ… â‘¢ æ¯æ¬¡æ‰“å¼€éƒ½å›é»˜è®¤çŠ¶æ€ï¼ˆé¡¶éƒ¨ + å½“å‰è¯­è¨€åœ¨ç¬¬ä¸€ä½ï¼‰
      menu.scrollTop = 0;

      document.addEventListener('click', onDoc, true);
      window.addEventListener('resize', positionMenu, {passive:true});
      window.addEventListener('scroll', positionMenu, {passive:true});
    }
    function closeMenu(){
      menu.classList.remove('open');
      // âœ… â‘¢ å…³é—­å³å¤ä½ï¼Œé¿å…â€œåœç•™åœ¨æŸä¸€çŠ¶æ€â€
      menu.scrollTop = 0;

      document.removeEventListener('click', onDoc, true);
      window.removeEventListener('resize', positionMenu);
      window.removeEventListener('scroll', positionMenu);
    }
    function toggleMenu(){
      if(menu.classList.contains('open')) closeMenu();
      else openMenu();
    }
    function onDoc(e){
      if(pill.contains(e.target)) return;
      if(menu.contains(e.target)) return;
      closeMenu();
    }

    pill.addEventListener('click', function(e){
      e.preventDefault();
      e.stopPropagation();
      toggleMenu();
    });

    // åˆå§‹åŒæ­¥ï¼šç¡®ä¿ SV æ˜¾ç¤ºåœ¨æ¨ªå¹…è¯­è¨€æ é‡Œï¼ˆä¸å†å‡ºç° ENï¼‰
    syncPill();
  })();
  </script>
</div>

<!-- âœ… åªä¸ºâ€œè®©æµè§ˆå™¨æ æ¶ˆå¤±â€è€Œå­˜åœ¨çš„æ»šåŠ¨å«ç‰‡ï¼šä½ çœ‹ä¸åˆ°å®ƒ -->
<div id="scroll-spacer" aria-hidden="true"></div>

</body>
</html>