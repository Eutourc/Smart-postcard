<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Smart Postcard — v3.1c（仅新增说明框，基于v3.0）</title>
<style>
  :root{--brand1:#10b981;--brand2:#22d3ee;--brand3:#34d399;--accent:#F5B800;--arrow:#0b3a77;}
  *{box-sizing:border-box}
  html,body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:#fff;color:#222}
  /* 顶部横幅（保持 v3.0 样式） */
  .top{background:var(--accent);padding:12px 14px;box-shadow:0 2px 12px rgba(0,0,0,.08);position:sticky;top:0;z-index:40}
  .bar{max-width:980px;margin:0 auto;display:flex;align-items:center;gap:12px}
  .logo{display:flex;align-items:center;gap:10px}
  .logo img{width:64px;height:64px}
  .brandword{display:flex;flex-direction:column}
  .brandword .l1,.brandword .l2{font-weight:900;font-size:26px;background:linear-gradient(90deg,var(--brand1),var(--brand2) 55%,var(--brand3));-webkit-background-clip:text;-webkit-text-fill-color:transparent}

  main{max-width:980px;margin:0 auto;padding:10px 14px 40px}
  h1{text-align:center;font-size:24px;margin:18px 0 12px}

  /* 容器与明信片（保持 v3.0） */
  .stage{background:#fff;border-radius:18px;padding:12px;box-shadow:0 10px 26px rgba(0,0,0,.08);position:relative}
  .viewer{display:flex;align-items:center;justify-content:center;padding:6px 0;position:relative}
  .cardbox{width:92%;max-width:560px;margin:0 auto;border:1px solid #d1d5db;background:#fff;position:relative}
  .cardbox img{width:100%;display:block;height:auto;border-radius:0}

  /* 仅新增：说明框（细长固定，三行上限），以及右下角版本标识 */
  .sp-hint{
    position:absolute;left:50%;top:8px;transform:translateX(-50%);
    width:58%;min-height:72px;max-height:84px;
    padding:6px 10px;background:#fffef6;
    border:2px dashed #e7cf72;border-radius:12px;
    box-shadow:0 1px 6px rgba(231,207,114,.12);
    font-weight:900;text-align:center;line-height:1.26;
    overflow:hidden;z-index:60;
    /* 默认字号给定，防止某些环境下 JS 未执行时过大 */
    font-size:14px;
  }
  .sp-hint .line{display:block;margin:2px 0;white-space:nowrap}

  .sp-marker{position:absolute;width:0;height:0;border-left:13px solid transparent;border-right:13px solid transparent;border-top:16px solid #16a34a;pointer-events:none;z-index:70;filter:drop-shadow(0 2px 4px rgba(22,163,74,.35))}

  /* 大箭头（保持 v3.0 贴边） */
  .big-arrow{position:absolute;top:50%;transform:translateY(-50%);z-index:50}
  .big-left{left:0}
  .big-left:before{content:"";display:block;border-top:22px solid transparent;border-bottom:22px solid transparent;border-right:26px solid var(--arrow);margin-left:-27px;filter:drop-shadow(0 1px 2px rgba(0,0,0,.18))}
  .big-right{right:0}
  .big-right:before{content:"";display:block;border-top:22px solid transparent;border-bottom:22px solid transparent;border-left:26px solid var(--arrow);filter:drop-shadow(0 1px 2px rgba(0,0,0,.18))}

  .features{text-align:center;margin:12px 0 8px;font-weight:800}
  .btns{display:flex;gap:10px;margin-top:6px}
  .btn{flex:1;padding:10px;border-radius:12px;border:none;font-weight:800}
  .btn.primary{background:var(--accent)}
  .start{display:block;width:100%;margin-top:8px;padding:12px;border-radius:12px;background:var(--accent);font-weight:900}

  /* 页内右下角版本标识（不增加高度） */
  .ver{position:absolute;right:8px;bottom:8px;font-size:11px;color:#bdbdbd;pointer-events:none}
</style>
</head>
<body>
<header class="top">
  <div class="bar">
    <div class="logo">
      <img src="Logo.png" alt="logo">
      <div class="brandword"><span class="l1">Smart</span><span class="l2">Postcard</span></div>
    </div>
  </div>
</header>

<main>
  <h1>珍藏您举世无双的纪念明信片</h1>
  <section class="stage">
    <div class="viewer">
      <div class="cardbox" id="cardbox">
        <!-- v3.0 的大箭头保留原位 -->
        <div class="big-arrow big-left" id="big-left" aria-hidden="true"></div>
        <div class="big-arrow big-right" id="big-right" aria-hidden="true"></div>

        <!-- v3.0 的明信片图片保留 -->
        <img id="img-front" src="postcard_cn.png" alt="postcard sample">
        <img id="img-back" src="postcard_back.png" alt="postcard back" style="display:none">

        <!-- 仅新增：说明框与小箭头 -->
        <div id="sp-hint" class="sp-hint"></div>
        <div id="sp-marker" class="sp-marker"></div>
      </div>
    </div>

    <div class="features">
      <p>操作简单 · 实体印刷 · 全球邮寄</p>
      <p>旅游纪念 · 集邮佳品 · 珍贵收藏</p>
      <p>照片打印 · A5 大尺码 · 物超所值</p>
    </div>

    <div class="btns">
      <button class="btn primary">纪念明信片</button>
      <button class="btn">传统明信片</button>
    </div>
    <button class="start">开始制作</button>

    <!-- 右下角版本标识（明确“base v3.0”） -->
    <div class="ver">v3.1c · base v3.0</div>
  </section>
</main>

<script>
document.addEventListener('DOMContentLoaded', function(){
  const hint = document.getElementById('sp-hint');
  const marker = document.getElementById('sp-marker');

  // 仅一条文案（三行内），后续步骤再增加切换逻辑
  const lines = [
    "明信片背面图案！可成为邮票图案！",
    "您可以任选照片！可用您的自拍照！",
    "这等于洗了一张 A5 大尺码的照片！"
  ];
  hint.innerHTML = lines.map(t=>`<span class="line">${t}</span>`).join("");

  // 自适应字号（12–16px）：保证最长一行不换、三行能装下
  const ctx = document.createElement('canvas').getContext('2d');
  const ff = getComputedStyle(hint).fontFamily || 'system-ui';
  const maxW = () => hint.clientWidth - 20;
  const maxH = () => parseFloat(getComputedStyle(hint).maxHeight) || 84;

  function fits(px){
    ctx.font = `900 ${px}px ${ff}`;
    if(!lines.every(t => ctx.measureText(t).width <= maxW())) return false;
    const lh = (px>=15?1.26:1.24) * px;
    return (lh * lines.length) <= maxH();
  }
  let lo=12, hi=16, best=14;
  while(lo<=hi){
    const mid = (lo+hi>>1);
    if(fits(mid)){ best=mid; lo=mid+1; } else { hi=mid-1; }
  }
  hint.style.fontSize = best + 'px';
  hint.style.lineHeight = (best>=15?1.26:1.24);

  // 小箭头默认指向邮票区域中心（与 v3.0 既定坐标一致）
  marker.style.left = '84%';
  marker.style.top  = 'calc(14% - 18px)';
});
</script>
</body>
</html>