<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Smart Postcard â€” Language Hub</title>
<meta http-equiv="Cache-Control" content="no-store" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

<style>
  :root{
    --topbar-bg:#F5B800;
    --pill-bg:#ffffff;
    --pill-border:rgba(0,0,0,.10);
    --shadow:0 2px 12px rgba(0,0,0,.08);
  }
  *{box-sizing:border-box}
  html,body{margin:0;height:100%;background:#fff;color:#111;font:16px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  .top{
    position:sticky;top:0;z-index:50;
    background:var(--topbar-bg);
    box-shadow:var(--shadow);
  }
  .bar{
    max-width:980px;margin:0 auto;
    display:flex;align-items:center;justify-content:space-between;
    gap:10px;padding:10px 14px;
  }
  .brand{display:flex;align-items:center;gap:10px;min-width:0}
  .brand img{width:64px;height:64px;object-fit:contain}
  .brandword{display:flex;flex-direction:column;line-height:1;min-width:0}
  .brandword .l1,.brandword .l2{
    font-weight:900;font-size:26px;letter-spacing:.5px;
    background:linear-gradient(90deg,#10b981,#22d3ee 55%,#34d399);
    -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
    white-space:nowrap;
  }

  .actions{display:flex;align-items:center;gap:8px}
  .iconbtn{width:40px;height:40px;display:grid;place-items:center;border-radius:50%;background:#fff;box-shadow:inset 0 0 0 1px rgba(0,0,0,.08)}
  .cart{position:relative}
  .badge{position:absolute;right:-6px;top:-6px;background:#ff4d4f;color:#fff;border-radius:8px;padding:0 5px;font-size:10px;line-height:16px;min-width:16px;height:16px;font-weight:800}

  /* Language pill + dropdown */
  .langwrap{position:relative}
  .langpill{
    display:flex;align-items:center;gap:8px;
    padding:8px 10px;border-radius:999px;background:var(--pill-bg);
    box-shadow:inset 0 0 0 1px var(--pill-border);
    user-select:none;cursor:pointer;
  }
  .langmark{
    width:28px;height:18px;border-radius:4px;
    display:flex;align-items:center;justify-content:center;
    font-weight:900;font-size:12px;letter-spacing:.2px;
    box-shadow:inset 0 0 0 1px rgba(0,0,0,.12);
    background:#fff;
  }
  .caret{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:6px solid #222}

  .dropdown{
    position:absolute;right:0;top:calc(100% + 8px);
    background:#fff;border-radius:14px;
    box-shadow:0 10px 30px rgba(0,0,0,.18), inset 0 0 0 1px rgba(0,0,0,.08);
    overflow:hidden;min-width:180px;
    display:none;
  }
  .dropdown.open{display:block}
  .item{
    display:flex;align-items:center;gap:10px;
    padding:12px 14px;cursor:pointer;
    font-weight:800;
  }
  .item:hover{background:rgba(0,0,0,.05)}
  .mini{
    width:28px;height:18px;border-radius:4px;
    display:flex;align-items:center;justify-content:center;
    font-weight:900;font-size:12px;
    box-shadow:inset 0 0 0 1px rgba(0,0,0,.12);
    background:#fff;
  }
  .label{font-weight:800}
  .sub{font-weight:700;opacity:.65;font-size:12px;margin-left:auto}

  /* Page container */
  .shell{
    max-width:980px;margin:0 auto;
    padding:0 14px 14px;
  }
  .frame{
    width:100%;
    border:none;
    border-radius:18px;
    box-shadow:0 2px 10px rgba(0,0,0,.10);
    background:#fff;
    height:calc(100svh - 96px);
  }
  @media (max-width:420px){
    .frame{height:calc(100svh - 92px)}
  }
</style>
</head>

<body>
<header class="top">
  <div class="bar">
    <div class="brand">
      <img alt="Smart Postcard" src="Logo.png" />
      <div class="brandword">
        <span class="l1">Smart</span>
        <span class="l2">Postcard</span>
      </div>
    </div>

    <div class="actions">
      <div class="iconbtn cart">
        <span style="font-size:18px">ğŸ›’</span>
        <span class="badge" id="cart-badge">0</span>
      </div>

      <div class="langwrap" id="langwrap">
        <div class="langpill" id="langpill" aria-label="Language">
          <div class="langmark" id="langmark">EN</div>
          <div class="caret"></div>
        </div>

        <div class="dropdown" id="dropdown" role="menu" aria-label="Languages">
          <div class="item" data-lang="en">
            <div class="mini">EN</div>
            <div class="label">English</div>
            <div class="sub">en</div>
          </div>
          <div class="item" data-lang="cn">
            <div class="mini">ç®€</div>
            <div class="label">ç®€ä½“ä¸­æ–‡</div>
            <div class="sub">cn</div>
          </div>
          <div class="item" data-lang="tc">
            <div class="mini">ç¹</div>
            <div class="label">ç¹é«”ä¸­æ–‡</div>
            <div class="sub">tc</div>
          </div>
          <div class="item" data-lang="sv">
            <div class="mini">ğŸ‡¸ğŸ‡ª</div>
            <div class="label">Svenska</div>
            <div class="sub">sv</div>
          </div>
        </div>
      </div>

      <div aria-label="menu" class="iconbtn"><span style="font-size:22px;font-weight:900">â‰¡</span></div>
    </div>
  </div>
</header>

<div class="shell">
  <iframe class="frame" id="frame" src="en_v7.0.html" title="Smart Postcard"></iframe>
</div>

<script>
(function(){
  // å›ºå®šæ–‡ä»¶åï¼šä½ åªè¦æŠŠå››ä¸ªè¯­è¨€æ–‡ä»¶æ”¹æˆè¿™äº›åå­—å³å¯ï¼ˆä¸éœ€è¦æ”¹ä»£ç ï¼‰
  var PAGES = {
    en: { src: "en_v7.0.html", mark: "EN" },
    cn: { src: "cn_v7.0.html", mark: "ç®€" },
    tc: { src: "tc_v7.0.html", mark: "ç¹" },
    sv: { src: "sv_v7.0.html", mark: "ğŸ‡¸ğŸ‡ª" }
  };

  var frame = document.getElementById("frame");
  var langpill = document.getElementById("langpill");
  var dropdown = document.getElementById("dropdown");
  var langmark = document.getElementById("langmark");
  var langwrap = document.getElementById("langwrap");

  function openMenu(){ dropdown.classList.add("open"); }
  function closeMenu(){ dropdown.classList.remove("open"); }
  function toggleMenu(){
    if(dropdown.classList.contains("open")) closeMenu();
    else openMenu();
  }

  function setLang(code){
    var p = PAGES[code] || PAGES.en;

    // æ›´æ–° pill æ˜¾ç¤º
    langmark.textContent = p.mark;

    // åˆ‡æ¢ iframe
    // åŠ ä¸€ä¸ª cache-bustï¼Œé¿å…ä½ æ‰‹æœºç«¯ç¼“å­˜å¯¼è‡´â€œçœ‹ä¼¼æ²¡åˆ‡æ¢â€
    var bust = "v=" + Date.now();
    frame.src = p.src + (p.src.indexOf("?")>=0 ? "&" : "?") + bust;

    // è®°ä½é€‰æ‹©
    try{ localStorage.setItem("sp_lang", code); }catch(e){}
    closeMenu();
  }

  // å…³é”®ï¼šç”¨ pointerdown + stopPropagationï¼Œé¿å…â€œåˆ‡æ¢åèœå•äº‹ä»¶å¤±æ•ˆâ€
  langpill.addEventListener("pointerdown", function(e){
    e.preventDefault();
    e.stopPropagation();
    toggleMenu();
  });

  dropdown.addEventListener("pointerdown", function(e){
    e.stopPropagation();
    var item = e.target.closest(".item");
    if(!item) return;
    var code = item.getAttribute("data-lang");
    setLang(code);
  });

  // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­èœå•
  document.addEventListener("pointerdown", function(){
    closeMenu();
  });

  // åˆå§‹è¯­è¨€ï¼šé»˜è®¤ ENï¼›å¦‚æœç”¨æˆ·æ›¾é€‰è¿‡ï¼Œè‡ªåŠ¨æ¢å¤
  var saved = null;
  try{ saved = localStorage.getItem("sp_lang"); }catch(e){}
  if(saved && PAGES[saved]) setLang(saved);
  else setLang("en");
})();
</script>
</body>
</html>