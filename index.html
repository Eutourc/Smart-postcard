<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Smart Postcard — DIAG</title>
<style>
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,"PingFang SC","Microsoft YaHei",sans-serif;background:#fff}
  .wrap{max-width:720px;margin:0 auto;padding:24px 16px}
  h1{font-size:28px;margin:12px 0}
  .ok{padding:12px 14px;border-left:6px solid #16a34a;background:#ecfdf5;margin:12px 0;border-radius:8px}
  .err{padding:12px 14px;border-left:6px solid #b91c1c;background:#fef2f2;margin:12px 0;border-radius:8px;color:#7f1d1d;white-space:pre-wrap}
  .card{border:1px dashed #e5e7eb;border-radius:12px;padding:14px;margin:14px 0}
  .grid{display:grid;grid-template-columns:130px 1fr;gap:10px;align-items:center}
  .tag{display:inline-block;background:#f3f4f6;border-radius:999px;padding:6px 10px;margin-right:8px}
</style>
</head>
<body>
<div class="wrap">
  <h1>PAGE LOADED ✅</h1>
  <div id="info" class="ok">本页用于排查“空白页”原因：能看到这行，说明 GitHub Pages 与 HTML 正常渲染。</div>

  <div class="card">
    <div class="grid">
      <div class="tag">当前时间</div><div id="now"></div>
      <div class="tag">版本参数</div><div id="ver"></div>
      <div class="tag">页面状态</div><div id="state">初始化中…</div>
    </div>
  </div>

  <h2>图片检测</h2>
  <div id="imgs" class="card">开始检测 `postcard_en.png` 与 `postcard_cn.png` 是否可加载…</div>

  <h2>错误监控</h2>
  <div id="errors" class="card">若有 JS/CSS 错误，将显示在这里。</div>
</div>

<script>
(function(){
  // 显示时间与版本
  document.getElementById('now').textContent = new Date().toLocaleString();
  document.getElementById('ver').textContent = new URL(location.href).search;

  // 显示错误到页面
  const errBox = document.getElementById('errors');
  window.onerror = function(msg, src, line, col, err){
    const div = document.createElement('div');
    div.className = 'err';
    div.textContent = 'JS Error: ' + msg + '\n来源: ' + (src||'-') + '\n行列: ' + line + ':' + col + (err?('\n堆栈:\n'+(err.stack||'')):'');
    errBox.appendChild(div);
    document.getElementById('state').textContent = '发生脚本错误（见下方红框）。';
  };

  // 简单脚本自检
  document.getElementById('state').textContent = '脚本运行正常 ✅';

  // 图片存在性检测（不会影响页面显示）
  const list = ['postcard_en.png','postcard_cn.png'];
  const imgsDiv = document.getElementById('imgs');
  list.forEach(name=>{
    const url = name + '?v=' + Date.now();
    const img = new Image();
    img.onload = ()=>{
      const ok = document.createElement('div');
      ok.className='ok';
      ok.textContent = '✓ ' + name + ' 加载成功';
      imgsDiv.appendChild(ok);
    };
    img.onerror = ()=>{
      const er = document.createElement('div');
      er.className='err';
      er.textContent = '× ' + name + ' 未找到或无法加载（这不会导致本页空白，但正式首页会显示占位/空白）。';
      imgsDiv.appendChild(er);
    };
    img.src = url;
  });
})();
</script>
</body>
</html>
