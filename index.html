<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta http-equiv="Cache-Control" content="no-store" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Smart Postcard — v7.0 Language Hub</title>

  <style>
    :root{
      --bar-h: 118px; /* 横幅高度（可微调，但先别动） */
      --pill-bg: rgba(255,255,255,.88);
      --pill-border: rgba(0,0,0,.12);
      --pill-shadow: 0 8px 18px rgba(0,0,0,.18);
      --text: #111;
    }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "PingFang SC","Hiragino Sans GB","Microsoft YaHei", sans-serif;
      background:#fff;
      color:var(--text);
    }

    /* ===== 顶部横幅（保持你现有美观风格：用你仓库里的 header.jpg / Logo.png） ===== */
    .topbar{
      position: sticky;
      top: 0;
      z-index: 9999;
      height: var(--bar-h);
      background: #d7a100;
      overflow: hidden;
    }
    .topbar::before{
      content:"";
      position:absolute; inset:0;
      background: url("header.jpg") center/cover no-repeat;
      opacity: 1;
    }

    /* Logo（如果你的 EN/CN 页面顶部 logo 不是这样，也没关系：这里只负责横幅外观） */
    .brand{
      position:absolute;
      left: 14px;
      top: 10px;
      display:flex;
      align-items:center;
      gap:10px;
      pointer-events:none;
    }
    .brand img{
      width:64px; height:64px;
      object-fit:contain;
      filter: drop-shadow(0 4px 8px rgba(0,0,0,.25));
    }
    .brand .txt{
      line-height:1;
      font-weight:800;
      font-size:34px;
      color:#18b7b3;
      text-shadow: 0 2px 0 rgba(0,0,0,.10);
    }
    .brand .txt small{
      display:block;
      font-size:22px;
      font-weight:700;
      color:#0a7f7c;
      margin-top:4px;
    }

    /* ===== 语言栏：放在横幅右上角，不破坏横幅美观 ===== */
    .langbar{
      position:absolute;
      right: 12px;
      top: 18px;
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius: 22px;
      background: var(--pill-bg);
      border: 1px solid var(--pill-border);
      box-shadow: var(--pill-shadow);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
    }
    .langbtn{
      appearance:none;
      border: 0;
      background: transparent;
      padding: 6px 10px;
      border-radius: 14px;
      font-weight: 800;
      font-size: 15px;
      line-height: 1;
      cursor: pointer;
      color:#111;
    }
    .langbtn.active{
      background: rgba(0,0,0,.10);
    }
    .langbtn:active{
      transform: translateY(1px);
    }

    /* ===== 主内容：用 iframe 装载各语言独立首页，确保“一个 index 统管四页” ===== */
    .frameWrap{
      width:100%;
      height: calc(100vh - var(--bar-h));
      background:#fff;
    }
    iframe{
      width:100%;
      height:100%;
      border:0;
      display:block;
      background:#fff;
    }

    /* 小屏适配：把横幅略缩矮一点（不改变布局，只适配） */
    @media (max-width: 420px){
      :root{ --bar-h: 106px; }
      .brand .txt{ font-size:30px; }
      .brand .txt small{ font-size:20px; }
      .brand img{ width:58px; height:58px; }
      .langbtn{ font-size:14px; padding:6px 9px; }
    }
  </style>
</head>

<body>
  <header class="topbar" role="banner" aria-label="Smart Postcard Top Bar">
    <div class="brand">
      <img src="Logo.png" alt="Smart Postcard logo" />
      <div class="txt">
        Smart
        <small>Postcard</small>
      </div>
    </div>

    <!-- 语言按钮：中文不用国旗；英文用 EN；瑞典语可用 SV -->
    <nav class="langbar" aria-label="Language switcher">
      <button class="langbtn" data-lang="cn" title="简体中文">简</button>
      <button class="langbtn" data-lang="tc" title="繁體中文">繁</button>
      <button class="langbtn" data-lang="en" title="English">EN</button>
      <button class="langbtn" data-lang="sv" title="Svenska">SV</button>
    </nav>
  </header>

  <main class="frameWrap">
    <iframe id="contentFrame" src="en_v7.0.html" loading="eager" referrerpolicy="no-referrer"></iframe>
  </main>

  <script>
    (function(){
      const fileMap = {
        en: "en_v7.0.html",
        cn: "cn_v7.0.html",
        tc: "tc_v7.0.html",
        sv: "sv_v7.0.html"
      };

      const titleMap = {
        en: "Smart Postcard — EN v7.0",
        cn: "Smart Postcard — CN v7.0",
        tc: "Smart Postcard — TC v7.0",
        sv: "Smart Postcard — SV v7.0"
      };

      const frame = document.getElementById("contentFrame");
      const buttons = Array.from(document.querySelectorAll(".langbtn"));

      function setActive(lang){
        buttons.forEach(b => b.classList.toggle("active", b.dataset.lang === lang));
        document.title = titleMap[lang] || "Smart Postcard — v7.0";
      }

      function pickInitialLang(){
        const h = (location.hash || "").replace("#","");
        return fileMap[h] ? h : "en";
      }

      function switchLang(lang){
        if(!fileMap[lang]) lang = "en";
        setActive(lang);
        // 只换 iframe，不会破坏横幅，也不会出现“必须回到默认英语才灵”的问题
        frame.src = fileMap[lang];
        location.hash = lang;
      }

      // 关键：隐藏 iframe 内部页面自带的 header（否则会出现你截图那种“双横幅覆盖变异”）
      function hideInnerHeader(){
        try{
          const doc = frame.contentDocument;
          if(!doc) return;

          // 常见 header 选择器（尽量宽容）
          const candidates = [
            "header",
            ".topbar",
            ".header",
            "#header",
            ".site-header",
            ".navbar"
          ];

          candidates.forEach(sel=>{
            const el = doc.querySelector(sel);
            if(el) el.style.display = "none";
          });

          // 某些版本可能在 body 上加了顶部留白，为避免空白，再尝试压掉
          const body = doc.body;
          if(body){
            body.style.marginTop = "0";
            body.style.paddingTop = "0";
          }
        }catch(e){
          // 同源下应该不会失败；若失败也不影响切换，只是会看到内页头部
        }
      }

      frame.addEventListener("load", hideInnerHeader);

      buttons.forEach(btn=>{
        btn.addEventListener("click", ()=> switchLang(btn.dataset.lang));
      });

      // 首次进入按 hash；否则默认 EN
      const init = pickInitialLang();
      setActive(init);
      frame.src = fileMap[init];
      // 兼容：某些手机第一次 load 事件慢，补一次
      setTimeout(hideInnerHeader, 350);
    })();
  </script>
</body>
</html>